"use strict";(globalThis.webpackChunkdocux_blog=globalThis.webpackChunkdocux_blog||[]).push([[6529],{2553:(e,i,n)=>{n.d(i,{A:()=>t});let t=n.p+"assets/images/simpleanalyticsplugin-2957a55cdb966e0556b8af04ceb2cd9e.webp"},4181:e=>{e.exports=JSON.parse('{"permalink":"/blog/simple-analytics-plugin-docusaurus","editUrl":"https://github.com/Juniors017/docux-blog/tree/main/blog/2025/09/14/simpleanalytics/index.mdx","source":"@site/blog/2025/09/14/simpleanalytics/index.mdx","title":"Plugin Simple Analytics","description":"A complete tutorial to integrate Simple Analytics into your Docusaurus site with a custom local plugin.","date":"2025-09-14T00:00:00.000Z","tags":[{"inline":true,"label":"simple-analytics","permalink":"/blog/tags/simple-analytics"},{"inline":true,"label":"plugin","permalink":"/blog/tags/plugin"},{"inline":true,"label":"navigation","permalink":"/blog/tags/navigation"},{"inline":true,"label":"analytics","permalink":"/blog/tags/analytics"},{"inline":true,"label":"tutorial","permalink":"/blog/tags/tutorial"}],"readingTime":4.51,"hasTruncateMarker":true,"authors":[{"name":"Docux","title":"Curious explorer, a bit of a mad experimenter, and a bit of a contributor.","url":"https://docuxlab.com","page":{"permalink":"/blog/authors/docux"},"socials":{"github":"https://github.com/Juniors017","bluesky":"https://bsky.app/profile/docuxlab.com"},"bio":"Curious explorer, a bit of a mad experimenter, and a bit of a contributor for Docusaurus. I love creating tools to improve productivity and user experience.\\nAnd sharing my discoveries with the community.\\n","imageURL":"https://avatars.githubusercontent.com/u/97809069?v=4","key":"docux"}],"frontMatter":{"title":"Plugin Simple Analytics","description":"A complete tutorial to integrate Simple Analytics into your Docusaurus site with a custom local plugin.","schemaTypes":["HowTo","BlogPosting"],"slug":"simple-analytics-plugin-docusaurus","image":"/img/simpleanalyticsplugin.webp","authors":["docux"],"mainTag":"analytics","tags":["simple-analytics","plugin","navigation","analytics","tutorial"],"date":"2025-09-14T00:00:00.000Z","last_update":{"date":"2025-09-14T00:00:00.000Z","author":"docux"},"difficulty":"Intermediate","totalTime":"PT30M","prepTime":"PT10M","performTime":"PT20M","estimatedCost":"Free","tool":["React","Docusaurus","JavaScript","Node.js","VSCode"],"supply":["Node.js","Docusaurus","Simple Analytics","Local Plugin"],"yield":"Functional Simple Analytics plugin for SPA tracking","genre":"Technical Tutorial","inLanguage":"en","isAccessibleForFree":true,"readingTime":"10 min","articleSection":"Tutorial","copyrightYear":2025,"copyrightHolder":"Docux","category":"Web Development","keywords":["simple analytics","plugin","docusaurus","spa","navigation","analytics"],"hide_table_of_contents":false,"series":"SEO & Analytics","blueSkyRecordKey":null},"unlisted":false,"prevItem":{"title":"Component LogoIcon","permalink":"/blog/logoicon-component-docusaurus"},"nextItem":{"title":"Component Card","permalink":"/blog/card-component-docusaurus-infima"}}')},7751:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var t=n(4181),s=n(4848),l=n(8453);let a={title:"Plugin Simple Analytics",description:"A complete tutorial to integrate Simple Analytics into your Docusaurus site with a custom local plugin.",schemaTypes:["HowTo","BlogPosting"],slug:"simple-analytics-plugin-docusaurus",image:"/img/simpleanalyticsplugin.webp",authors:["docux"],mainTag:"analytics",tags:["simple-analytics","plugin","navigation","analytics","tutorial"],date:new Date("2025-09-14T00:00:00.000Z"),last_update:{date:new Date("2025-09-14T00:00:00.000Z"),author:"docux"},difficulty:"Intermediate",totalTime:"PT30M",prepTime:"PT10M",performTime:"PT20M",estimatedCost:"Free",tool:["React","Docusaurus","JavaScript","Node.js","VSCode"],supply:["Node.js","Docusaurus","Simple Analytics","Local Plugin"],yield:"Functional Simple Analytics plugin for SPA tracking",genre:"Technical Tutorial",inLanguage:"en",isAccessibleForFree:!0,readingTime:"10 min",articleSection:"Tutorial",copyrightYear:2025,copyrightHolder:"Docux",category:"Web Development",keywords:["simple analytics","plugin","docusaurus","spa","navigation","analytics"],hide_table_of_contents:!1,series:"SEO & Analytics",blueSkyRecordKey:null},r=void 0,o={authorsImageUrls:[void 0]},c=[{value:"Plugin Structure",id:"plugin-structure",level:2},{value:"File Tree",id:"file-tree",level:3},{value:"simpleAnalytics/index.js (Server Side / Build)",id:"simpleanalyticsindexjs-server-side--build",level:2},{value:"sa-client.js (Client Side / Browser)",id:"sa-clientjs-client-side--browser",level:2},{value:"Why two different tracking lines?",id:"why-two-different-tracking-lines",level:2},{value:"The main script",id:"the-main-script",level:3},{value:"The fallback image",id:"the-fallback-image",level:3},{value:"Why two different domains?",id:"why-two-different-domains",level:3},{value:"Alternative: Why not modify the <code>Layout</code> component?",id:"alternative-why-not-modify-the-layout-component",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Useful Resources",id:"useful-resources",level:2}];function d(e){let i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{LogoIcon:t,Snippet:a,TabItem:r,Tabs:o}=i;return t||p("LogoIcon",!0),a||p("Snippet",!0),r||p("TabItem",!0),o||p("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("center",{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"https://github.com/Juniors017",children:(0,s.jsx)(i.img,{src:"https://img.shields.io/badge/Developer-Docux-green.svg",alt:"Developer"})}),"\n",(0,s.jsx)(i.a,{href:"https://github.com/Juniors017",children:(0,s.jsx)(i.img,{src:"https://img.shields.io/badge/Developement-validated-green.svg",alt:"Developement"})}),"\n",(0,s.jsx)(i.a,{href:"https://opensource.org/licenses/MIT",children:(0,s.jsx)(i.img,{src:"https://img.shields.io/badge/License-MIT-yellow.svg",alt:"License: MIT"})}),"\n",(0,s.jsx)(i.a,{href:"https://github.com/Juniors017",children:(0,s.jsx)(i.img,{src:"https://img.shields.io/badge/AI-80%25-blue.svg",alt:"AI 80%"})})]}),(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(2553).A+"",width:"1199",height:"673"})})]})}),"\n",(0,s.jsxs)(i.p,{children:["Want to integrate ",(0,s.jsx)(i.a,{href:"https://www.simpleanalytics.com/?utm_source=docuxlab.com&utm_content=badge&affiliate=babep",children:"Simple Analytics"})," into your Docusaurus site and effectively track user navigation in a Single Page Application (SPA) context?"]}),"\n",(0,s.jsx)(i.p,{children:"This guide explains how to create a local plugin for Docusaurus that handles the injection of the tracking script and tracks page changes."}),"\n",(0,s.jsx)(i.p,{children:"It manages the injection of the main script as well as tracking page changes in the context of a Single Page Application (SPA), which is essential for Docusaurus."}),"\n",(0,s.jsxs)(i.p,{children:["This plugin is a local plugin. There's no need to install it via npm or yarn. Simply ensure that the ",(0,s.jsx)(i.code,{children:"simpleAnalytics"})," folder is located in the ",(0,s.jsx)(i.code,{children:"plugins"})," directory at the root of your project."]}),"\n",(0,s.jsx)("center",{children:(0,s.jsx)("a",{href:"https://www.simpleanalytics.com/?utm_source=docuxlab.com&utm_content=badge&affiliate=babep",referrerpolicy:"origin",target:"_blank",children:(0,s.jsxs)("picture",{children:[(0,s.jsx)("source",{srcset:"https://simpleanalyticsbadges.com/docuxlab.com?mode=dark",media:"(prefers-color-scheme: dark)"}),(0,s.jsx)("img",{src:"https://simpleanalyticsbadges.com/docuxlab.com?mode=light",loading:"lazy",referrerpolicy:"no-referrer",crossorigin:"anonymous"})]})})}),"\n",(0,s.jsx)(i.h2,{id:"plugin-structure",children:"Plugin Structure"}),"\n",(0,s.jsx)(i.p,{children:"The plugin separates logic into two distinct files, as they run in different environments and at different times."}),"\n",(0,s.jsx)(i.h3,{id:"file-tree",children:"File Tree"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"plugins/\n\u2514\u2500\u2500 simpleAnalytics/\n    \u251C\u2500\u2500 index.js      # Main Docusaurus plugin file\n    \u2514\u2500\u2500 sa-client.js  # Client module for SPA navigation tracking\n"})}),"\n",(0,s.jsx)(i.h2,{id:"simpleanalyticsindexjs-server-side--build",children:"simpleAnalytics/index.js (Server Side / Build)"}),"\n",(0,s.jsx)(i.p,{children:"This file is the core of the plugin and runs in a Node.js environment during development server startup or site compilation."}),"\n",(0,s.jsx)(a,{filename:"plugins/simpleAnalytics/index.js",source:"plugins/simpleAnalytics/index.js",code:"function simpleAnalyticsPlugin(context, options) {\n  return {\n    name: \"docusaurus-plugin-simple-analytics\",\n    injectHtmlTags() {\n      return {\n        headTags: [\n          {\n            tagName: 'script',\n            attributes: {\n              src: 'https://scripts.simpleanalyticscdn.com/latest.js',\n              async: true,\n              'data-hostname': 'docuxlab.com',\n            },\n          },\n          {\n            tagName: 'noscript',\n            innerHTML: '<img src=\"https://queue.simpleanalyticscdn.com/noscript.gif\" alt=\"\" referrerpolicy=\"no-referrer-when-downgrade\" style=\"position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none;\" />',\n          },\n        ],\n      };\n    },\n  };\n}\n\nmodule.exports = simpleAnalyticsPlugin;",lang:"javascript"}),"\n",(0,s.jsx)(i.p,{children:"Its role is to integrate into the Docusaurus build process:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"injectHtmlTags()"})}),": This function injects the main Simple Analytics script and the ",(0,s.jsx)(i.code,{children:"<noscript>"})," tag directly into the final HTML file. This is what allows tracking the ",(0,s.jsx)(i.strong,{children:"first visit"})," of a user to the site."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"getClientModules()"})}),": This function tells Docusaurus that it should include another JavaScript file, ",(0,s.jsx)(i.code,{children:"sa-client.js"}),", in the code that will be sent and executed by the user's browser."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["In summary, ",(0,s.jsx)(i.code,{children:"index.js"})," handles the initial and static configuration."]}),"\n",(0,s.jsx)(i.h2,{id:"sa-clientjs-client-side--browser",children:"sa-client.js (Client Side / Browser)"}),"\n",(0,s.jsxs)(i.p,{children:["This file executes ",(0,s.jsx)(i.strong,{children:"only in the user's browser"}),". Its existence is crucial because Docusaurus functions as a Single Page Application (SPA)."]}),"\n",(0,s.jsx)(a,{filename:"plugins/simpleAnalytics/sa-client.js",source:"plugins/simpleAnalytics/sa-client.js",code:'export function loadSimpleAnalytics() {\n  if (typeof window === "undefined") return;\n  if (document.querySelector("script[src*=\'simpleanalyticscdn.com\']")) return;\n\n  const script = document.createElement("script");\n  script.src = "https://scripts.simpleanalyticscdn.com/latest.js";\n  script.async = true;\n  document.body.appendChild(script);\n\n  const noscript = document.createElement("noscript");\n  noscript.innerHTML =\n    \'<img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" />\';\n  document.body.appendChild(noscript);\n\n  return () => {\n    script.remove();\n    noscript.remove();\n  };\n}\n\n\nif (typeof window !== "undefined") {\n\n  if (document.readyState === "loading") {\n    document.addEventListener("DOMContentLoaded", loadSimpleAnalytics);\n  } else {\n    loadSimpleAnalytics();\n  }\n}\n',lang:"javascript"}),"\n",(0,s.jsxs)(i.p,{children:["Its role is to manage navigation tracking ",(0,s.jsx)(i.strong,{children:"after the initial page load"}),":"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Listening to route changes"}),": In an SPA, changing pages doesn't fully reload the HTML. This script therefore listens to Docusaurus internal navigation events."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Triggering page views"}),": When a user navigates to a new page (for example, from ",(0,s.jsx)(i.code,{children:"/home"})," to ",(0,s.jsx)(i.code,{children:"/blog/my-article"}),"), this script calls the Simple Analytics tracking function (e.g., ",(0,s.jsx)(i.code,{children:"window.sa_pageview()"}),') to manually signal that a new "page view" has occurred.']}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["Without ",(0,s.jsx)(i.code,{children:"sa-client.js"}),", only the first site access would be counted, and all subsequent navigations within the site would be ignored by Simple Analytics."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"why-two-different-tracking-lines",children:"Why two different tracking lines?"}),"\n",(0,s.jsx)(i.p,{children:"In the Simple Analytics plugin code, these two lines serve different but complementary purposes for tracking:"}),"\n",(0,s.jsx)(i.h3,{id:"the-main-script",children:"The main script"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"https://scripts.simpleanalyticscdn.com/latest.js\n"})}),"\n",(0,s.jsx)(i.p,{children:"This URL loads the main Simple Analytics JavaScript script which:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Collects navigation data (pages visited, time spent, etc.)"}),"\n",(0,s.jsx)(i.li,{children:"Manages user events (clicks, scrolling, etc.)"}),"\n",(0,s.jsx)(i.li,{children:"Sends data to the Simple Analytics server"}),"\n",(0,s.jsx)(i.li,{children:"Only works if JavaScript is enabled in the browser"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"the-fallback-image",children:"The fallback image"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:'<img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" />\n'})}),"\n",(0,s.jsx)(i.p,{children:"This GIF image (1x1 pixel, invisible) serves as a fallback solution when:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"JavaScript is disabled in the browser"}),"\n",(0,s.jsx)(i.li,{children:"The main script cannot load (ad blocker, network issue)"}),"\n",(0,s.jsx)(i.li,{children:"Very old browsers that don't support modern JavaScript"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"why-two-different-domains",children:"Why two different domains?"}),"\n",(0,s.jsx)(i.p,{children:"Simple Analytics uses a distributed architecture:"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"https://scripts.simpleanalyticscdn.com/latest.js"}),": CDN optimized for serving JavaScript files"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"https://queue.simpleanalyticscdn.com/noscript.gif"}),": Specialized server for receiving tracking data"]}),"\n",(0,s.jsx)(i.p,{children:"This separation allows:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Better performance (CDN optimized for each content type)"}),"\n",(0,s.jsx)(i.li,{children:"Redundancy (if one server goes down, the other can continue)"}),"\n",(0,s.jsx)(i.li,{children:"Blocker bypass (some block scripts but not images)"}),"\n",(0,s.jsxs)(i.li,{children:["The ",(0,s.jsx)(i.code,{children:"<noscript>"})," tag ensures that at least a basic visit is recorded, even in the most restrictive environments."]}),"\n"]}),"\n",(0,s.jsxs)(i.h2,{id:"alternative-why-not-modify-the-layout-component",children:["Alternative: Why not modify the ",(0,s.jsx)(i.code,{children:"Layout"})," component?"]}),"\n",(0,s.jsxs)(i.p,{children:["Another method for tracking navigation in a Single Page Application (SPA) like Docusaurus is to customize (swizzle) the ",(0,s.jsx)(i.code,{children:"Layout"})," component and insert a React ",(0,s.jsx)(i.code,{children:"useEffect"})," that listens to URL changes."]}),"\n",(0,s.jsx)(i.p,{children:"However, this approach has drawbacks:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Tight coupling"}),": It mixes analytics tracking logic with your theme's presentation logic."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Less robustness"}),": Any major modification to your theme or the ",(0,s.jsx)(i.code,{children:"Layout"})," component could break tracking."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["This plugin's approach, using ",(0,s.jsx)(i.code,{children:"getClientModules"}),", is the method recommended by Docusaurus. It's cleaner and more robust because it completely decouples the tracking functionality from the theme and React components. Your tracking continues to work even if you radically change your site's appearance."]}),"\n",(0,s.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(i.p,{children:["To activate the plugin, add its path to the ",(0,s.jsx)(i.code,{children:"plugins"})," array in your ",(0,s.jsx)(i.code,{children:"docusaurus.config.js"})," file."]}),"\n",(0,s.jsx)(o,{children:(0,s.jsx)(r,{value:"js",label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t,{name:"javascript",size:"24"})," "]}),children:(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-javascript",metastring:"title='docusaurus.config.js'",children:'\nimport simpleAnalytics from "./plugins/simpleAnalytics/index.js"\n// ...existing code...\nconst config = {\n  // ...\n  plugins: [\n    // ... other plugins\n    [simpleAnalytics, {}],\n  ],\n  // ...\n};\n// ...existing code...\n'})})})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsx)(i.p,{children:"You can go further by adding different options such as a notrack option to avoid tracking certain pages.\nAnd surely much more, however I wanted to keep it simple for this example."})}),"\n",(0,s.jsx)(i.h2,{id:"useful-resources",children:"Useful Resources"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://docs.simpleanalytics.com/",children:"Official Simple Analytics Documentation"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://simpleanalytics.com/",children:"Simple Analytics Dashboard"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://docusaurus.io/docs/api/plugin-methods",children:"Docusaurus Plugin Documentation"})}),"\n"]})]})}function u(e={}){let{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}function p(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>r});var t=n(6540);let s={},l=t.createContext(s);function a(e){let i=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);